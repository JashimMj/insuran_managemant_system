{%extends 'index.html'%}
{%block contant%}
<!-- Latest compiled and minified CSS -->

<section class="content-header"
         style="background-color:#00DCDC; padding:5px;">
    <h1>
        <b>Marine Insurance</b>
    </h1>
</section>

{%for x in messages%}
<div class="callout callout-info">
    {{x}}
</div>
{%endfor%}

<section class="content">
    <div class="row">
        <div class="col-md-8">

            <!-- general form elements -->
            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Manrine Quotation</h3>
                </div>
                <!-- /.box-header -->
                <!-- form start -->
                <form action="{%url 'branchinfosave'%}" method="POST"
                      data-client-url="{%url 'qmarineselectclient'%}" data-bank-url="{%url 'qmarineselectbank'%}"
                      data-bankadd-url="{%url 'qmarineselectbankadd'%}" data-fdate-url="{%url 'qmarinesendate'%}"
                      enctype="multipart/form-data"
                      class="subcall">
                    {%csrf_token%}
                    <div class="row">
                        <div class="box-body">
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">Search Bill No</label>
                                        <input type="text" class="form-control" id="exampleInputEmail1"
                                               placeholder="Bill No"
                                               name="search" style="background-color:#66FFFF;">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail10">Last Bill No</label>
                                        <input type="text" class="form-control" id="exampleInputEmail10"
                                               placeholder="Last Bill No"
                                               name="lastbill">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail29">Bill NO</label>
                                        <input type="text" class="form-control" id="exampleInputEmail29"
                                               placeholder="Branch Name"
                                               name="name">
                                    </div>
                                </div>
                                <div class="col-md-6">

                                    <div class="form-group">
                                        <label for="exampleInputEmail30">Bill Date</label>
                                        <input type="date" class="form-control" id="exampleInputEmail30"
                                               name="name" value="{{dases}}" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Client Name</label>
                                        <select class="form-control custom-select mr-sm-2 selectpicker"   data-show-subtext="true" data-live-search="true" id="client" name="cname"
                                                required>
                                            <option selected>Select List</option>
                                            {%for x in Client%}
                                            <option value="{{x.id}}">{{x.Client_Name}}</option>
                                            {%endfor%}
                                        </select>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Client Address</label>
                                         <select class="form-control custom-select mr-sm-2" id="select2" name="cname"
                                                required>
                                              <option selected>Select List</option>

                                         </select>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="bname">Bank Name</label>
                                        <select class="form-control custom-select mr-sm-2 selectpicker"   data-show-subtext="true" data-live-search="true" id="bname" name="bname"
                                                required>
                                            <option selected>Select List</option>
                                            {%for x in Bank%}
                                            <option value="{{x.id}}">{{x.Bank_Name}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="baddress">Bank Branch</label>
                                        <select class="form-control custom-select mr-sm-2" id="bbranch" name="bbranch"
                                                required>
                                            <option selected>Select List</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="baddress">Bank Address</label>
                                        <select class="form-control custom-select mr-sm-2" id="baddress" name="baddress"
                                                required>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="exampleInputEmail18">Interest Covered</label>
                                        <textarea class="form-control" name="icovered" id="exampleInputEmail18"
                                                  placeholder="Interest Covered"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail19">Voyage From</label>
                                        <textarea class="form-control" name="Vfrom" id="exampleInputEmail19"
                                                  placeholder="Voyage From"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="exampleInputEmail9">Voyage To</label>
                                        <textarea class="form-control" name="vto" id="exampleInputEmail9"
                                                  placeholder="Voyage From"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Transit By</label>
                                        <select class="form-control custom-select mr-sm-2" name="transitby" required>
                                            <option selected>Select List</option>
                                            {%for x in transit%}
                                            <option value="{{x.id}}">{{x.name}}</option>
                                            {%endfor%}
                                        </select>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label>Voyage Via</label>
                                        <select class="form-control custom-select mr-sm-2" name="voyagevia" required>
                                            <option selected>Select List</option>
                                            {%for x in voya%}
                                            <option value="{{x.id}}">{{x.name}}</option>
                                            {%endfor%}
                                        </select>

                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="fdate">From Date</label>
                                        <input type="date" class="form-control" id="fdate"
                                               placeholder="Branch Name"
                                               name="fdate" value="{{dases}}">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" id="tsdate">
                                        <label for="tdate">To Date</label>
                                        <input type="date" class="form-control" id="tdate"
                                               placeholder="Branch Name"
                                               name="todate">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group" id="amount">
                                        <label for="tdate">Amount</label>
                                        <input type="text" class="form-control" id="amounts"
                                               placeholder="Amount"
                                               name="amount">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group" id="extra">
                                        <label for="tdate">Extra</label>
                                        <input type="text" class="form-control" id="extras"
                                               placeholder="Extra"
                                               name="extra1">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group" id="extra2">
                                        <label for="tdate">Extra</label>
                                        <input type="text" class="form-control" id="extras2"
                                               placeholder="Extra Another"
                                               name="extra2">
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group" id=current>
                                        <label for="tdate">Currency</label>
                                        <select class="form-control custom-select mr-sm-2" name="Currency" required>
                                            <option selected>Select List</option>
                                            {%for x in currencys%}
                                            <option value="{{x.id}}">{{x.name}}</option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group" id="Rate">
                                        <label for="tdate">Rate</label>
                                        <input type="text" class="form-control" id="Rates"
                                               placeholder="Rate"
                                               name="rate">
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-group" id="bdt">
                                        <label for="tdate">BDT Amount</label>
                                        <input type="text" class="form-control" id="bdts"
                                               placeholder="BDT Amount"
                                               name="bdt">
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="Declaration">Declaration</label>
                                        <textarea class="form-control" name="vto" id="Declaration"
                                                  placeholder="Declaration"></textarea>
                                    </div>
                                </div>

                                <div class="col-md-4">
                                    <div class="form-group" id="produce">
                                        <label for="tdate">Producer</label>
                                        <select class="form-control custom-select mr-sm-2 selectpicker"   data-show-subtext="true" data-live-search="true" name="produce" required>
                                            <option selected>Select List</option>
                                            {%for x in producer%}
                                            <option value="{{x.id}}">ID:{{x.id}}  Name:{{x.Name}} </option>
                                            {%endfor%}
                                        </select>
                                    </div>
                                </div>



                            </div>
                        </div>
                    </div>


                    <!-- /.box-body -->

                    <div class="box-footer">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>

    </div>

    </div>
</section>


<script>
$('#client').change(function(){
 var cnames= $(this).val();
$.ajax({
    url:"{%url 'qmarineselectclient'%}",
    data:{
    'cnames':cnames
    },
    success:function(response){

    console.log(response.caddress[0].id);
    $('#select2').empty();
        for (var key in response.caddress)
        {
        var tem = "<option value="+response.caddress[key].id+">"+response.caddress[key].Address+"</option>";
        $('#select2').html(tem);

        }
    },
    error:function(response){
    alert("Some Error");
    },


});

});
$('#bname').change(function(){
 var abc = $(this).val();
$.ajax({
    url:"{%url 'qmarineselectbank'%}",
    data:{
    'abc' : abc
    },
    success:function(response){

    $('#bbranch').empty();
        for (var key in response.ranch)
        {
        var tem = "<option value="+response.ranch[key].id+">"+response.ranch[key].Branch_Name+"</option>";
        $('#bbranch').html(tem);

        }
    },
    error:function(response){
    alert("Some Error");
    },


});

});


$(document).ready(function(){

var fdates= $('#fdate').val();
$.ajax({
    url:"{%url 'qmarinesendate'%}",
    data:{
    'fdates':fdates
    },
    success:function(data){
    $('#tdate').val(data.data.taken)
    },
    error:function(data){
    alert("Some Error");
    }

})

});
$('#fdate').change(function(){

var fdates= $('#fdate').val();
$.ajax({
    url:"{%url 'qmarinesendate'%}",
    data:{
    'fdates':fdates
    },
    success:function(data){
    $('#tdate').val(data.data.taken)
    },
    error:function(response){
    alert("Hello! I am !!");
    }

})

});

$('#bname, #bbranch').change(function(){
var baddress= $(this).val();
$.ajax({
    url:"{%url 'qmarineselectbankadd'%}",
    data:{
    'baddress' : baddress
    },
    success:function(response){

    $('#baddress').empty();
        for (var key in response.baddress)
        {
        var tem = "<option value="+response.baddress[key].id+">"+response.baddress[key].Address+"</option>";
        $('#baddress').html(tem);

        }
    },
    error:function(response){
    alert("Some Error");
    },


});

});











</script>
{%endblock%}